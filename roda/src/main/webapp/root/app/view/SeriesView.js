/*
 * File: app/view/DetailGridPanelCls.js
 *
 * This file was generated by Sencha Architect version 2.2.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('databrowser.view.SeriesView', {
    extend: 'Ext.tab.Panel',
//    extend: 'Ext.grid.Panel',
    alias: 'widget.seriesview',
    autoRender: true,
    id: 'seriesview',
    itemId: 'seriesview',
    width: '100%',
    header: true,
    hideHeaders: false,
    store: 'SeriesStore',
    loaddata: function(id){

    	//asta e o varianta idioata determinata oarecum de incapacitatea autorilor extjs de a explica cum se fac rahaturile simple    	
    	
    	var dtab = Ext.getCmp('sedetails');
    	var gridtab = Ext.getCmp('seriesstudies');
    	var sStore = Ext.StoreManager.get(this.store);    	
    	sStore.load({
    		  id: id, //set the id here
    		  scope:this,
    		  callback: function(records, operation, success){
    		    if(success){
    		    	var rec = sStore.first();
    		    	console.log(rec.studiesStore);
    		    	dtab.update(records[0].data);
    		    	gridtab.getView().bindStore(rec.studiesStore);
    		    }
    		  }
    		});
    },
    title: 'Series View',
    items: [
            {
                autoScroll: true,
                layout:'fit',
                title: 'Detalii',
            	id:'sedetails',
                tpl: new Ext.XTemplate(
                		'<div style="padding:10px;">',
                    	'<H2>{name}</H2>',		
                    	'<H3>{author}</H3>',
                    	'<p>{description}</p>',
                    	'</div>'
                    	),
            },{
                autoScroll: true,
                layout:'fit',
                title: 'Studii',
            	id:'sestudies',
            	items: [{
                        	xtype: 'gridpanel',
                        	id: 'seriesstudies',
                        	width:'100%',
                        	autoScroll: true,
                        	remoteSort: false,                 	
//                        	title: 'Members',
                  //      	forceFit: true,
//                        	store: 'SeriesStore',
//                            header: false,
 //                           hideHeaders: true,                        	
                        	columns: [
                            {
                                xtype: 'gridcolumn',
                                dataIndex: 'an',
                                hideable: false,
                                text: 'an',
                                width:50,
                                fixed: true
                            },
                            {
                                xtype: 'gridcolumn',
                                dataIndex: 'name',
                                hideable: false,
                                text: 'name',
                                flex:1
                            },
                            {
                                xtype: 'gridcolumn',
                                dataIndex: 'countries',
                                hideable: false,
                                text: 'Tara',
                                width:100,
                                fixed: true
                            }

                        ]
            	}
       	        ]
            }
            ],    
//    store: 'CatalogDetailStore',
initComponent: function() {
    var me = this;
    me.callParent(arguments);  
}

});
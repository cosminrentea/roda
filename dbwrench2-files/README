Procedura de lucru la modificarea schemei BD
--------------------------------------------

Pasul 0. (se efectueaza doar o data, local, de catre fiecare developer)
Se editeaza in fisierul “database.properties” (folosit de roda-drop.sh, roda-create.sh) toate detaliile locale de conectare: user, host, baza de date, nume default script SQL.
Se foloseste implicit schema numita “public” din baza de date indicata.

----
A. Pentru modificari la schema:
----

1. Se editeaza in dbWrench toate modificarile necesare, in fisierul “roda-db-doc.xml” (de pe SVN).

2. Din linia de comanda:
./roda-drop.sh

3. Se exporta din dbWrench scriptul SQL de creare:
Tools -> Forward Engineering
Recalculate Script
Save to File => salvat cu numele "roda-db-doc.sql", in folder-ul “dbwrench2-files”

4. Din linia de comanda:
./roda-create.sh

5. Se face commit in SVN simultan la fisierele “roda-db-doc.xml” si la “roda-db-doc.sql” (pentru ca ceilalti sa nu depinda de rularea dbWrench, si sa poata sari peste pasul 3).


----
B. Pentru update local, dupa modificari facute de catre altcineva la schema dbWrench
----

1. SVN update, pentru a obtine noul script SQL = roda-db-doc.sql

2. Din linia de comanda:
./roda-drop.sh
./roda-create.sh


----
Note.
----
- Scripturile folosesc deocamdata doar shell-ul (bash), Perl si psql.
- Fisierul “database.properties” nu trebuie sa fie commit-uit pe SVN (ramane local).
- Scriptul “roda-drop.sh” sterge toate tabelele si apoi toate secventele din BD.
- Scriptul “roda-create.sh” proceseaza eventual scriptul SQL exportat de DbWrench (de ex. aici se poate face introducerea tipurilor Serial si Bigserial) si apoi creeaza schema folosind parametrii definiti in fisierul “database.properties”.
- Datele initiale sau de test se pot introduce ulterior crearii schemei, de ex. din CSV-uri, scripturi SQL, Perl sau Java.

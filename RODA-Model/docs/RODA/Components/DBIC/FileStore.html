<HTML>
<HEAD>
<TITLE>RODA::Components::DBIC::FileStore;</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<UL>
<LI><A HREF="#NAME">NAME

</A><LI><A HREF="#"></A><LI><A HREF="#FUNCTIONARE">FUNCTIONARE

</A><LI><A HREF="#TODO">TODO

</A><LI><A HREF="#METHODS">METHODS

</A></UL>
<HR>
<H1><A NAME="NAME">NAME

</A></H1>

<P>RODA::Components::DBIC::FileStore;

</P><H1><A NAME=""></A></H1>

<P>version 0.01

</P><H1><A NAME="FUNCTIONARE">FUNCTIONARE

</A></H1>

<P>La incarcarea schemei (instantierea Result-ului care foloseste componentul) se ruleaza register_column pentru fiecare coloana. 
Register_column este un soi de rol avant la lettre (DBIx::Class nu suporta Moose la nivelul asta inca) care injecteaza (sub forma de referinte catre subrutine anonime)
doua sectiuni care se vor rula la citirea/respectiv scrierea informatiei cu pricina in baza de date: 
    - inflate - se ocupa de convertirea valorii citite din baza de date (in cazul de fata un string) intr-un obiect (in cazul de fata un obiect de tipul FileStore::File)
    - deflate - se presupune ca primeste un obiect si il transforma intr-un string sau numar intreg sau altceva care poate fi stocat in baza de date

</P>
<P>Combinatia inflate/deflate pleaca oarecum de la premisa ca atat operatia de umflare cat si cea de dezumflare se fac de la acelasi tip de obiect. Aici nu e cazul. Mai mult, 
aici e nevoie de operatii suplimentare, de aceea deflate/inflate nu pot fi simetrice. De aceea renuntam la deflate (trebuie sa fie acolo altfel face scandal) dar nu face decat sa returneze valoarea

</P>
<P>Ramane inflate, care are rolul de a cauta fisierul corespunzator inregistrarii din tabel si sa-l &quot;umfle&quot; transformandu-l intr-un obiect de tipul FileStore::File

</P>
<P>Operatiile propriu-zise de copiere, stergere, etc se fac prin  supraincarcarea metodelor existente deja in DBIx::Class::ROW: insert, update si delete.  

</P>
<P>De mentionat ca nu seteaza singur coloanele de tip mime type si md5. Pentru aceasta va trebui sa facem triggere in clasele result corespunzatoare tabelelor, nu vreau sa
incui numele acelor coloane in clasa aceasta 



</P><H1><A NAME="TODO">TODO

</A></H1>

<P>Ceva refactoring
copy
Testare cu mai multe coloane de tip fisier
Testare cu pk multiplu

</P><H1><A NAME="METHODS">METHODS

</A></H1>

</BODY>
</HTML>
